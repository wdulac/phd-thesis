% vim: spelllang=fr

\documentclass[12pt,twoside,openright]{book}

\usepackage{silence}
\WarningFilter{minitoc(hints)}{W0023}
\WarningFilter{minitoc(hints)}{W0028}
\WarningFilter{minitoc(hints)}{W0030}
\WarningFilter{minitoc(hints)}{W0024}

%%%%%%%%%% Figures and tables

%\usepackage{tabularray}
\usepackage{graphicx} % Required for inserting images
\graphicspath{
    {Figures/Chap1/}
    {Figures/Chap2/}
    {Figures/Chap3/}
    {Figures/Chap4/}
}

\usepackage{caption}
\captionsetup{
    labelfont=bf,
    labelsep=endash,
    margin=30pt
}

\usepackage{float}

\usepackage{pdfpages} % Pour importer mon article

%%%%%% Biblatex settings

\usepackage[backend=biber, style=authoryear-comp, autocite=inline, maxbibnames=20, minbibnames=20, maxcitenames=2, backref=true, backrefstyle=three, date=year, isbn=false, giveninits=true, uniquelist=false, uniquename=init, natbib=false, sortcites=false]{biblatex} %uniquename=full

\DefineBibliographyExtras{french}{\restorecommand\mkbibnamefamily} %pour que les noms des références ne soient pas en majuscules
\renewbibmacro{in:}{ %eliminates the 'in' in the biblio
    \ifentrytype{article}{}{%
    \printtext{\bibstring{in}\intitlepunct}}}

% Apparemment, permet de ne pas avoir les titres d'article entre guillemets ?
\setlength\bibitemsep{1.5\itemsep}
\DeclareFieldFormat[inbook]{citetitle}{#1}
\DeclareFieldFormat[inbook]{title}{#1}
\DeclareFieldFormat[article]{citetitle}{#1}
\DeclareFieldFormat[article]{title}{#1}

% Supprime la date de consultation dans la bibliographie pour le(s) types indiqués.
\AtEveryBibitem{%
    \ifentrytype{article}{
            \clearfield{urlyear}
        }
    }

%%%%%%% Font and text related settings

\usepackage[french]{babel}
\usepackage[style=french]{csquotes}

\usepackage[]{fontspec}
\setmainfont{Tex Gyre Termes}
\usepackage{amsmath,amsfonts,amssymb,bm}
\usepackage{textcomp} %Required to use \textdegree
\usepackage{url}
\usepackage[locale=FR]{siunitx}
\sisetup{%
    mode=math,
    mathrm,
    detect-all,
}
\addto\extrasfrenchb{\sisetup{locale = FR}}
\DeclareSIUnit{\knot}{kt} % Remplace kn par kt, qui est plus communément utilisé (même si pas SI).
\usepackage[version=4]{mhchem} % Utilisé pour écrire 2 x CO2

%% Declare common units macros
\newcommand{\km}[1]{\SI{#1}{\kilo\metre}}
\newcommand{\Pa}[1]{\SI{#1}{\pascal}}
\newcommand{\hPa}[1]{\SI{#1}{\hecto\pascal}}
\newcommand{\m}[1]{\SI{#1}{\metre}}
\newcommand{\ms}[1]{\SI{#1}{\metre\per\second}}
\newcommand{\kmh}[1]{\SI{#1}{\kilo\metre\per\hour}}
\newcommand{\prct}[1]{\SI{#1}{\percent}}

\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}
\hypersetup{
    colorlinks, % Colours links instead of boxes
    %linkcolor={red!50!black},
    linkcolor=black, % Internal links
    %citecolor={blue!50!black}, % References
    citecolor=black,
    urlcolor={blue!80!black} % External links
}
\urlstyle{same}

\usepackage{lipsum}

%%%%%% Page style

\usepackage[a4paper, top=2.5cm, bottom=2cm, margin=2.25cm, bindingoffset=6mm]{geometry} % margin=2cm

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[LE]{\leftmark}
\fancyhead[RO]{\rightmark}
\setlength{\headheight}{29.8pt}
\addtolength{\topmargin}{-13.72pt}
%\renewcommand{\headrulewidth}{0pt} % Supprime la barre horizontale en haut de page de fancyhdr

\usepackage{emptypage} % Pour ne pas avoir de numéro et de header sur les pages vides

\setlength{\parskip}{8pt}
\interfootnotelinepenalty=10000 % Prevent page breaking in footnotes

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[nameinlink, noabbrev, french]{cleveref}
\usepackage[french]{minitoc}
\setcounter{secnumdepth}{3}
\renewcommand{\thesubsubsection}{\thesubsection.\Roman{subsubsection}}
\setcounter{minitocdepth}{3}

%\usepackage[nottoc]{tocbibind}
\usepackage{enumitem}
\setlist[itemize]{nosep, label={--}}

\usepackage{subfiles}
\addbibresource{\subfix{./references.bib}}

%%%% Page de garde
\usepackage[ED=SDU2E-Oc, Ets=UT3, draft]{tlsflyleaf}
%
\title{Évolution future de l'activité cyclonique tropicale}
\author{William Dulac}
%%\date{2023}
%\defencedate{Décembre 2023}
\lab{Centre National de Recherches Météorologiques (UMR 3589)}
%
\nboss{2}
\makesomeone{boss}{1}{Julien CATTIAUX}{}{}
\makesomeone{boss}{2}{Fabrice CHAUVIN}{}{}
%
%%% Referee
\nreferee{2}
\makesomeone{referee}{1}{Sylvie MALARDEL}{}{}
\makesomeone{referee}{2}{Jean-Philippe DUVEL}{}{}
%%% Judges
%\njudge{5}
%\makesomeone{judge}{1}{Premier MEMBRE}{Professeur d'Universit\'e}{Pr\'esident du Jury}
%\makesomeone{judge}{2}{Second MEMBRE}{Astronome Adjoint}{Membre du Jury}
%\makesomeone{judge}{3}{Troisi\`eme MEMBRE}{Charg\'e de Recherche}{Membre du Jury}
%\makesomeone{judge}{4}{Quatri\`eme MEMBRE}{Charg\'e de Recherche}{Membre du Jury}
%\makesomeone{judge}{5}{Cinqui\`eme MEMBRE}{Charg\'e de Recherche}{Membre du Jury}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\frontmatter

\makeflyleaf
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{%
\markboth{\thesection.\ \MakeUppercase{#1}}{}}

\dominitoc

\chapter*{Remerciements}

Merci.

\chapter*{Résumé}

Ici sera le résumé

\chapter*{Abstract}

Abstract goes here (in english)

\tableofcontents
\mainmatter

\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction générale}

\mtcaddchapter

\subfile{Chapitres/introduction}

\chapter{Cyclones tropicaux}\label{chap:chapitre_1}
\subfile{Chapitres/chapitre1}

\chapter{Détection objective de cyclones tropicaux dans les simulations}\label{chap:chapitre_2}
\subfile{Chapitres/chapitre2}

\chapter{Les indices de cyclogénèses}\label{chap:chapitre_3}
\subfile{Chapitres/chapitre3}

\chapter{Application de l'indice en climat plus chaud}\label{chap:chapitre_4}
\subfile{Chapitres/chapitre4}

\chapter*{Conclusion}
\addcontentsline{toc}{chapter}{Conclusion}
\subfile{Chapitres/conclusion}

% \appendix
% \chapter{Appendix Title}
% \subfile{Chapitres/appendix}

\addcontentsline{toc}{chapter}{Bibliographie}
\printbibliography
%\bibliography{references}

\end{document}
